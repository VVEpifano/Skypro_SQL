# Анализ и визуализация динамики баланса учеников онлайн-школы - PostgreSQL / Metabase
Работа выполнена в рамках курса онлайн-университета SkyPro "Аналитик данных"
## 

## Задачи по проекту:
- показать изменение балансов студентов онлайн-школы в 2016 году
- создать таблицу с балансами каждого студента за каждый день
- изучить изменения балансов студентов, обнаружить искажения в данных, составить список вопросов к дата-инженерам 
- визуализировать, сколько всего уроков было на балансе всех студентов за каждый календарный день, как это количество менялось, исходя из проводимых транзакций и списаний уроков по мере прохождения
- сделать выводы на основе визуализации

## Выводы по проекту:
- Общая сумма уроков на балансе учеников постепенно росла в течение года
- Наблюдается "сезонность" уроков по дням недели. Наибольшая активность с понедельника по четверг, в выходные - примерно в 2 раза ниже, чем в пиковые дни
- Среднее количество оплаченных уроков стабильно росло в течение года, был спад в Марте, Июле и Декабре
- Обнаружилась "сезонность" оплат уроков по дням недели. Пиковый день - понедельник, меньше всего оплат производят в выходные - на треть ниже, чем в понедельник
- Среднее количество уроков практически все время росло в течение года, было снижение во время майских праздников, летом и во второй половине Декабря
##

## 01. Структура базы данных skyeng_db
- ``students``  — данные о студентах (потенциальных, которые только оставили заявку, и тех, кто действительно оплатил обучение)
- ``orders``  — данные о заявках на обучение
- ``classes``  — данные об уроках
- ``payments``  — данные об оплате
- ``teachers``  — данные об учителях
##

## 02. SQL-запрос по шагам
- Выясняем, когда была первая транзакция для каждого студента. Сборка баланса его уроков, начиная с этой даты
- Сборка таблицы с датами за каждый календарный день 2016 года
- Узнаем, за какие даты имеет смысл собирать баланс для каждого студента
- Обнаружим изменения балансов студентов, связанные с успешными транзакциями
- Найдем баланс студентов, который сформирован только транзакциями
- Выявим изменения балансов студентов, связанные с прохождением уроков
- Найдем баланс студентов, который сформирован только прохождением уроков
- Найдем общий баланс студентов, сформированный транзакциями и прохождением уроков
- Посмотрим, как менялось общее количество уроков на балансе всех студентов

## 03. Визуализация динамики общего баланса всех учеников онлайн-школы
- ``transaction_balance_change``  - изменение общего баланса под влиянием транзакций (оплат, начислений, корректирующих списаний)
- ``transaction_balance_change_cs``  - кумулятивная сумма изменений общего баланса под влиянием транзакций
- ``sum_classes``  - изменение общего баланса под влиянием уроков (списаний с баланса по мере их прохождения)
- ``sum_classes_cs``  - кумулятивная сумма изменений общего баланса под влиянием уроков
- ``sum_balance``  - общее количество уроков на балансе всех студентов

## 04. Вопросы к дата-инженерам
- Почему мы имеем много минусовых балансов?
- Как вообще обстоят дела с данными по оплате уроков, они неполные? Или несвоевременно прогружаются? 
- Есть замечания в classes, выявлены уроки, у которых время окончания меньше, чем начала.
- Уроки не могут иметь отрицательную продолжительность. С чем это связано?
